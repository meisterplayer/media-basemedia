{"version":3,"sources":["webpack:///webpack/bootstrap 2b60b5ec10dca42dc41e","webpack:///./index.js","webpack:///./src/js/BaseMedia.js","webpack:///./package.json"],"names":["BaseMedia","config","meister","player","supports","browser","isSamsung","window","MediaSource","push","item","Promise","resolve","indexOf","type","supported","errorCode","Meister","ErrorCodes","WRONG_TYPE","reject","getPlayerByType","trigger","info","metadata","name","src","currentSrc","title","bitrates","bitrate","currentIndex","one","isLive","duration","Infinity","currentTime","relativePosition","e","targetTime","isNaN","timeOffset","blockSeekForward","Number","isFinite","NaN","time","version","MediaPlugin","registerPlugin","pluginName"],"mappings":"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","file":"dist/BaseMedia.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2b60b5ec10dca42dc41e","import BaseMedia from './src/js/BaseMedia';\n\nexport default BaseMedia;\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import packageJson from '../../package.json';\n\nclass BaseMedia extends Meister.MediaPlugin {\n    constructor(config, meister) {\n        super(config, meister);\n\n        this.player = null;\n\n        this.supports = ['mp4', 'mp3', 'icecast', 'mov'];\n\n        // HLS behaves like mp4 in samsung devices\n        if (this.meister.browser.isSamsung && !window.MediaSource) {\n            this.supports.push('m3u', 'm3u8');\n        }\n    }\n\n    static get pluginName() {\n        return 'BaseMedia';\n    }\n\n    static get pluginVersion() {\n        return packageJson.version;\n    }\n\n    isItemSupported(item) {\n        return new Promise((resolve) => {\n            if (this.supports.indexOf(item.type) === -1) {\n                return resolve({\n                    supported: false,\n                    errorCode: Meister.ErrorCodes.WRONG_TYPE,\n                });\n            }\n\n            return resolve({\n                supported: true,\n            });\n        });\n    }\n\n    get currentItem() {\n        return this.item;\n    }\n\n    process(item) {\n        return new Promise((resolve, reject) => {\n            this.player = this.meister.getPlayerByType('html5', item);\n\n            if (this.player) {\n                this.item = item;\n\n                // TODO: Shouldn't we check first if there is metadata before we trigger an UI event?\n                this.meister.trigger('uiEvent', { type: 'splash', info: this.item.metadata });\n\n                resolve(item);\n            } else {\n                reject(`${this.name}: Unable to play item ${item.src}, no suitable player available.`); //eslint-disable-line\n            }\n        });\n    }\n\n    load(item) {\n        super.load(item);\n\n        this.player.currentSrc = item.src;\n\n        // Ugly stuff to fix HLS in safari T_T\n        if (item.metadata) {\n            this.meister.trigger('itemMetadata', {\n                title: item.metadata.title,\n            });\n        }\n\n        if (item.type === 'm3u' || item.type === 'm3u8') {\n            this.meister.trigger('itemBitrates', {\n                bitrates: [{ metadata: { bitrate: 0 } }],\n                currentIndex: 0,\n            });\n        }\n\n\n        this.one('playerLoadedMetadata', () => {\n            let isLive = false;\n\n            const duration = this.player.duration;\n            if (duration === Infinity || duration === 0) {\n                isLive = true;\n            }\n\n            this.meister.trigger('itemTimeInfo', {\n                isLive,\n                duration,\n            });\n        });\n    }\n\n    get duration() {\n        if (!this.player) { return NaN; }\n\n        return this.player.duration;\n    }\n\n    get currentTime() {\n        if (!this.player) { return NaN; }\n\n        return this.player.currentTime;\n    }\n\n    set currentTime(time) {\n        if (!this.player) { return; }\n\n        this.player.currentTime = time;\n    }\n\n    unload() {\n        super.unload();\n\n        this.item = null;\n    }\n\n    _onPlayerTimeUpdate() {\n        this.meister.trigger('playerTimeUpdate', {\n            currentTime: this.player.currentTime,\n            duration: this.player.duration,\n        });\n    }\n\n    _onPlayerSeek() {\n        const currentTime = this.player.currentTime;\n        const duration = this.player.duration;\n        const relativePosition = currentTime / duration;\n\n        this.meister.trigger('playerSeek', {\n            relativePosition,\n            currentTime,\n            duration,\n        });\n    }\n\n    onRequestSeek(e) {\n        let targetTime;\n\n        if (!isNaN(e.relativePosition)) {\n            targetTime = e.relativePosition * this.player.duration;\n        } else if (!isNaN(e.timeOffset)) {\n            targetTime = this.player.currentTime + e.timeOffset;\n        }\n\n        // Check whether we are allowed to seek forward.\n        if (this.blockSeekForward && targetTime > this.player.currentTime) { return; }\n\n        if (Number.isFinite(targetTime)) {\n            this.player.currentTime = targetTime;\n        }\n    }\n}\n\nMeister.registerPlugin(BaseMedia.pluginName, BaseMedia);\nMeister.registerPlugin('baseMedia', BaseMedia);\n\nexport default BaseMedia;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/BaseMedia.js","module.exports = {\n\t\"name\": \"@meisterplayer/plugin-basemedia\",\n\t\"version\": \"5.2.0\",\n\t\"description\": \"Meister plugin for playback of basic media types (mp4, mp3, etc).\",\n\t\"main\": \"dist/BaseMedia.js\",\n\t\"keywords\": [\n\t\t\"meister\",\n\t\t\"video\",\n\t\t\"plugin\"\n\t],\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"https://github.com/meisterplayer/media-basemedia.git\"\n\t},\n\t\"author\": \"Triple\",\n\t\"license\": \"Apache-2.0\",\n\t\"dependencies\": {},\n\t\"devDependencies\": {\n\t\t\"meister-gulp-webpack-tasks\": \"^1.0.6\",\n\t\t\"meister-js-dev\": \"^3.1.0\",\n\t\t\"gulp\": \"^3.9.1\",\n\t\t\"babel-preset-es2015\": \"^6.24.0\",\n\t\t\"babel-preset-es2017\": \"^6.22.0\"\n\t},\n\t\"peerDependencies\": {\n\t\t\"@meisterplayer/meisterplayer\": \">= 5.1.0\"\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}